<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>User</th>
        <th>Basic Pay</th>
        <th>Abscences/LWOP (Days)</th>
        <th>Absences/LWOP</th>
        <th>Gross</th>
        <th>Deductions</th>
        <th>Total deductions</th>
        <th>Net</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% payroll.regular_entries.each do |entry| %>
        <tr>
        <td><%=entry.user.full_name%></td>
        <td><%=entry.basic_pay.format%></td>
        <td><%=entry.absences%></td>
        <td><%=entry.leave_without_pay.format%></td>
        <td><%=entry.gross.format%></td>
        <td>
          <ul class="p-0">
            <% entry.deductions.each do |deduction| %>
              <li><%= deduction.name %> - <%= deduction.amount.format %></li>
            <% end %>
          </ul>
        </td>
        <td><%=entry.total_deductions.format%></td>
        <td><%=entry.net.format%></td>
        <td>
          <% if payroll.pending? && Payroll.controller_policy(current_user).edit? %>
            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-coreui-toggle="dropdown" aria-expanded="false">
              Action
            </button>
          <% end %>
          <ul class="dropdown-menu">
            <li>
              <%= link_to "Edit", edit_regular_entry_path(entry), class: "dropdown-item" if payroll.pending? %>
            </li>
            <li>
              <%= button_to "Delete", regular_entry_path(entry), method: :delete, class: "dropdown-item", data: { turbo_confirm: "Are you sure?" } if payroll.pending? %>
            </li>
          </ul>
        </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <div><%= link_to "New entry", new_regular_entry_path(payroll_id: payroll.id), class: "btn btn-primary" if payroll.pending? %></div>
</div>